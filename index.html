<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pastebin</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
* { box-sizing: border-box }

body {
  margin: 0;
  background: #0b0b0b;
  color: #f1f1f1;
  font-family: monospace;
}

.container {
  max-width: 900px;
  margin: auto;
  padding: 20px;
}

h1 {
  text-align: center;
  margin-bottom: 20px;
}

.search {
  width: 100%;
  padding: 14px;
  font-size: 16px;
  background: #111;
  color: #fff;
  border: 3px solid #333;
  outline: none;
}

.section {
  margin-top: 25px;
}

.section h2 {
  font-size: 18px;
  margin-bottom: 10px;
  border-bottom: 1px solid #222;
  padding-bottom: 5px;
}

.paste {
  padding: 12px;
  background: #111;
  border: 1px solid #222;
  margin-bottom: 8px;
  cursor: pointer;
}

.paste:hover {
  background: #151515;
}

.paste-title {
  font-weight: bold;
}

.paste-meta {
  color: #777;
  font-size: 12px;
  margin-top: 4px;
}

.hidden { display: none }

.result-count {
  color: #999;
  font-size: 14px;
  margin-top: 10px;
}

/* ----- PASTE VIEW ----- */

.paste-view-box {
  margin-top: 10px;
}

.paste-back {
  display: inline-block;
  margin-bottom: 10px;
  color: #aaa;
  text-decoration: none;
  cursor: pointer;
}

.paste-view {
  background: #111;
  border: 3px solid #222;
  padding: 15px;
  max-height: 70vh;
  overflow-y: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
  font-size: 14px;
}

@media (max-width: 600px) {
  .paste-view {
    font-size: 13px;
    max-height: 65vh;
  }

  .search {
    font-size: 14px;
  }
}
</style>
</head>

<body>
<div class="container">

<h1 id="title">Pastebin</h1>

<input
  type="text"
  id="search"
  class="search"
  placeholder="Search pastes by title..."
  autocomplete="off"
/>

<div id="resultCount" class="result-count hidden"></div>

<div id="searchResults" class="section hidden">
  <h2>Search Results</h2>
  <div id="searchList"></div>
</div>

<div id="pinnedSection" class="section">
  <h2>Pinned Pastes</h2>
  <div id="pinnedList"></div>
</div>

<div id="recentSection" class="section">
  <h2>Recent Pastes</h2>
  <div id="recentList"></div>
</div>

<div id="pastePage" class="hidden paste-view-box">
  <div class="paste-back" onclick="location.href='./'">‚Üê Back</div>
  <div id="pasteContent" class="paste-view"></div>
</div>

</div>

<script>
/* -------------------------
   FAKE DATA (REPLACE LATER)
-------------------------- */

const pastes = [
  {
    id: "a1",
    title: "Hello World",
    pinned: true,
    created: 170000100,
    content: "Hello world!\nThis is a test paste.\n\nLine 4\nLine 5"
  },
  {
    id: "b2",
    title: "JavaScript Notes",
    pinned: false,
    created: 170000200,
    content: "const x = 10;\nconsole.log(x);\n\n// more code..."
  },
  {
    id: "c3",
    title: "Linux Commands",
    pinned: true,
    created: 170000300,
    content: "ls\ncd /\nrm -rf /\n\n(joke)"
  },
  {
    id: "d4",
    title: "Very Large Paste",
    pinned: false,
    created: 170000400,
    content: "LINE\n".repeat(300)
  }
];

/* -------------------------
   ELEMENTS
-------------------------- */

const searchInput = document.getElementById("search");
const pinnedList = document.getElementById("pinnedList");
const recentList = document.getElementById("recentList");
const searchResults = document.getElementById("searchResults");
const searchList = document.getElementById("searchList");
const pinnedSection = document.getElementById("pinnedSection");
const recentSection = document.getElementById("recentSection");
const resultCount = document.getElementById("resultCount");
const pastePage = document.getElementById("pastePage");
const pasteContent = document.getElementById("pasteContent");
const title = document.getElementById("title");

/* -------------------------
   RENDER
-------------------------- */

function renderPaste(el, paste) {
  const div = document.createElement("div");
  div.className = "paste";
  div.onclick = () => {
    location.href = "?id=" + paste.id;
  };
  div.innerHTML = `
    <div class="paste-title">${paste.title}</div>
    <div class="paste-meta">ID: ${paste.id}</div>
  `;
  el.appendChild(div);
}

function renderPinned() {
  pinnedList.innerHTML = "";
  pastes.filter(p => p.pinned).forEach(p => renderPaste(pinnedList, p));
}

function renderRecent() {
  recentList.innerHTML = "";
  pastes
    .slice()
    .sort((a, b) => b.created - a.created)
    .forEach(p => renderPaste(recentList, p));
}

/* -------------------------
   SEARCH
-------------------------- */

searchInput.addEventListener("input", () => {
  const q = searchInput.value.toLowerCase();

  if (!q) {
    searchResults.classList.add("hidden");
    pinnedSection.classList.remove("hidden");
    recentSection.classList.remove("hidden");
    resultCount.classList.add("hidden");
    return;
  }

  const matches = pastes.filter(p =>
    p.title.toLowerCase().includes(q)
  );

  searchList.innerHTML = "";
  matches.forEach(p => renderPaste(searchList, p));

  resultCount.textContent = `${matches.length} result(s) found`;
  resultCount.classList.remove("hidden");
  searchResults.classList.remove("hidden");
  pinnedSection.classList.add("hidden");
  recentSection.classList.add("hidden");
});

/* -------------------------
   PASTE PAGE
-------------------------- */

function loadPastePage() {
  const id = new URLSearchParams(location.search).get("id");
  if (!id) return false;

  const paste = pastes.find(p => p.id === id);
  title.textContent = paste ? paste.title : "Paste not found";
  pasteContent.textContent = paste ? paste.content : "Paste not found.";

  searchInput.classList.add("hidden");
  pinnedSection.classList.add("hidden");
  recentSection.classList.add("hidden");
  searchResults.classList.add("hidden");
  resultCount.classList.add("hidden");
  pastePage.classList.remove("hidden");

  return true;
}

/* -------------------------
   INIT
-------------------------- */

if (!loadPastePage()) {
  renderPinned();
  renderRecent();
}
</script>

</body>
</html>
